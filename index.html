<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Team 32</title>
        <link rel="icon" type="image/x-icon" href="assets/img/favicon.ico" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v5.15.1/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
    </head>
    <body id="page-top">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
            <div class="container">
                <a class="navbar-brand js-scroll-trigger" href="#page-top"><img src="assets\img\red-toad-among-rocks-matt-cormons.jpg" alt="" /></a>
                <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                    Menu
                    <i class="fas fa-bars ml-1"></i>
                </button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav text-uppercase ml-auto">
                        <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#Home">Home</a></li>
                        <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#Requirements">Requirements</a></li>
                        <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#Research">Research</a></li>
                        <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#UI">UI</a></li>
                        <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#System">System</a></li>
                        <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#Implementation">Implementation</a></li>
                        <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#Testing">Testing</a></li>
                        <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#Evaluation">Evaluation</a></li>
                        <li class="nav-item"><a class="nav-link js-scroll-trigger" href="https://holorepositoryportable2021developmentblog.wordpress.com/">Blog</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- Masthead-->
        <header class="masthead">
            <div class="container">
                <div class="masthead-subheading">UCL Computer Science Team 32</div>
                <div class="masthead-heading text-uppercase">Holorepository Portable 2021</div>
                <a class="btn btn-primary btn-xl text-uppercase js-scroll-trigger" href="#Home">Care to explore?</a>
            </div>
        </header>


        <!-- HOME PAGE-->

        <section class = "page-section" id = "Home">
            <div class = "container">
                <div class = "text-center">
                    <h2 class = "section-heading text-uppercase">Home</h2>
            </div>
            <div class="row text-center">
                <div class="col-md-4">
					
                  <h4 class="my-3">Abstract</h4>
					<p class ="my-3"> The HoloRepository Portable 2021 is a portable, Windows-based, medical 3D model viewer application. It aims to provide a convenient way for clinicians and educators to view, manipulate and store information about medical 3D models on their personal laptop or desktop.</p>
                 	<p class="text-muted">About this Project</p>
					
                    <h4 class="my-3">Video</h4>
					<video controls></video>
					<p class="text-muted">This is the title of the video</p>
					
					<h4 class="my-3">Development Team</h4>
			      <p class="text-muted">Bryn Llewelyn-Jones</p>
					<img src="../../Downloads/8bce7173f4f29f9.png" width="420" height="330" alt=""/>
					<p class="my-3">Team Leader, the main back-end developer.</p>
					<p class="text-muted">Shuai Yuan</p>
				  <img src="../../Downloads/1.jpg" width="226" height="293" alt=""/>
					<p class="my-3">Teammate, the main front-end developer.</p>
					<p class="text-muted">Daniel Rempel(The first term only)</p>
                  <h4 class="my-3">Gantt Chart</h4>
			    <img src="../../Downloads/app_logo.png" width="325.62" height="300" alt=""/> </div>
				<p class="my-3">Figure 4. This is the title of Gantt Chart which has not been finished yet.</p>
            </div>
        </section>


         <!-- REQUIREMENTS PAGE -->   

        <section class="page-section" id="Requirements">
            <div class="container">
                <div class="text-center">
                    <h2 class="section-heading text-uppercase">Requirements</h2>
                </div>
           <div class="row text-center">
                    <div class = "text-center">
                        <h4 class="my-3">Project Background</h4>
                        <p class ="my-3"> The HoloRepository is an open source, FHIR enabled research project that uses pretrained neural networks to convert from 2D CT and MRI DICOM scans to 3D models in the form of GLB and GLTF files.</p>

                        <p class="text-muted"></p>
                        <h4 class="my-3">Project Goals</h4>
                        <p class ="my-3"> Our project aims to provide a convenient way for clinicians and educators to view, manipulate and store information about 3D medical models. The HoloRepository Portable 2021 serves as a proof of 
                            concept for an application that could be integrated into the existing HoloRepository ecosystem and used in both a clinical and educational setting,
                        <p class="text-muted"></p>
                        <h4 class="my-3">Requirements Gathering</h4>
                        <p class = "my-3">The first stage of our requirements gathering involved meetings and interviews with our clients. These meetings enabled us to gain a better understanding of what we needed to build, and in doing so allowed us to 
                            establish an initial set of must-have requirements.<br>
                            To further our requirements gathering we carried out semi-structured interviews with pseudo-users (which we've included snippets of below). We chose to carry out semi-structured interviews to ensure that we would always get answers to the questions we had prepared, but also allowed us to probe deeper by asking additional questions 
                            if the interviewee said anything insightful that we had not considered initially. This ensured that the requirements we gathered were a truer reflection of what a user would look for in a medical model viewer application.<br>
                            Over the course of the development of our project, we met with our clients on a weekly basis. Our requirements have been expanded upon and subject to change over the course of development according to the requests of our clients,
                            but by meeting and demonstrating our progress frequently, we've ensured that our application is indeed delivering what our clients had in mind.
                        </p>
                        <h3 class = "text-muted">Semi-Structured interviews</p>
                        <h4 class="my-3">Personas and Scenarios</h4>
                        <p class="text-muted">Dr H J Hibert </p>
						<p class="text-muted">Dr Hibert is a doctor who's extremly passionate about keeping his patients as informed as possible. <br>
							He is a man without a lot of technological expericence, so is very interested in a simple app that allows him to view models of patient scans.</p>
						
						<p class="text-muted">Dr H Drouse </p>
						<p class="text-muted">Dr Drouse is very intersted in medicine and solving complex problems but struggles to be interested interacting with patients. He prefers to work alone.<br>
						He would like to be able to view models of patient scans and send these models to colleagues.</p>
						
						<p class="text-muted">Professor Q Q Hamunan </p>
						<p class="text-muted">Professor Hamunan is a professor of medicine who really loved to teach, and his research into human organs was very profound. However, what bothered him is that he could not find a suitable software which could make it very convenient for him to directly demonstrate the structure of different organs in the human body to students in class.</p>
						
                        <h4 class="my-3">Use Cases</h4>
                        <p class="text-muted"></p>
                        <h4 class="my-3">Moscow Requirements List</h4>
                        <p class="text-muted">*Subject to change</p>
                    </div>
                </div>
                </div>
                </div>
        </section>


        <!-- RESEARCH PAGE PAGE -->   

        <section class="page-section" id="Research">
            <div class="container">
                <div class="text-center">
                    <h2 class="section-heading text-uppercase">Research</h2>
                </div>
            <div class="row text-center">
                    <div class="col-md-4">
                        <h4 class="my-3">Related project review</h4>
                        <p class="text-muted">Maybe look at previous iterations of the holorepository</p>
                        <h4 class="my-3">Technologies used</h4>
                        <p class="text-muted">Why unity is most suitable for a cross platform application, compared to python vtk or three.js, for example</p>
                        <h4 class="my-3">Technolgies chosen</h4>
                        <p class="text-muted">Summarise the technologies we used (open source GLB loader, etc)</p>
                        <h4 class="my-3">References</h4>
                        <p class="text-muted">IEEE format</p>
                    </div>
                </div>
            </div>
        </section>

    <!-- UI Design page -->   

    <section class="page-section" id="UI">
        <div class="container">
            <div class="text-center">
                <h2 class="section-heading text-uppercase">User Interface Design</h2>
            </div>
        <div class="row text-center">
                <div class="col-md-4">
                    <h4 class="my-3">Initial sketches</h4>
                    <p class="text-muted">Talk about design principles</p>
                    <h4 class="my-3">Figma prototype 1</h4>
                    <p class="text-muted">Talk about the feedback we were given by our pseudousers and clients</p>
                    <h4 class="my-3">Figma prototype 2</h4>
                    <p class="text-muted">Discuss why this does a better job at upholding the design principles, say that our clients liked this more, etc.</p>
                    <h4 class="my-3">References</h4>
                    <p class="text-muted">IEEE format</p>
                </div>
            </div>
        </div>
    </section>

    <!-- System Architecture Design -->   

    <section class="page-section" id="System">
        <div class="container">
            <div class="text-center">
                <h2 class="section-heading text-uppercase">System Design</h2>
            </div>
            <div class = "text-center">
                <h3 class = "section-heading text-uppercase">System Architecture Diagram</h3>
                <img src = "assets/img/Updated system arch.png" style = "width:100%">
                <p class = "text-muted">(WIP) This system architecture diagram provides a high-level overview of our system and its core functionalities. 
                </p> 
                <h3 class = "section-heading text-uppercase">Design Patterns</h3>
                <h4 class = "my-3">Singleton pattern</h4>
                <p class = "my-3"> A number of the classes in our codebase are dependent on the properties of the loaded model (such as its centre and radius). The <b>ModelHandler</b> class  
                    holds a reference to the <b>Organ</b> object, which is an abstract class that represents the loaded model. The ModelHandler class is responsible for loading in the Organ (see the <i>Model loading and initialisation</i> class diagram below), but also calculating the properties of the loaded Organ that the other classes rely on.
                    In order to provide other classes ease of access to these properties, ModelHandler is made a singleton. Although the Singleton pattern is often seen as an antipattern, its use here is appropriate
                    as only one model is ever loaded into the application at any given time. Our <b>EventManager</b> class (see below) is also a singleton.
                </p>
                <h4 class = "my-3">Publisher-Subscriber pattern</h4>
                <p> To reduce the dependencies between classes in our codebase we utilised the Publisher-Subscriber pattern. To do this, we created the <b>EventManager</b> class. The EventManager holds a reference to a number of different events, each of which is designed to trigger a certain action within the application. Each event has a corresponding public method which can be called to invoke the event. As the class is a singleton, any class can trigger these events without a reference to the EventManager, and any class can subscribe to these events without a reference to the EventManager.  
                    So for instance, a button can fire an event when clicked. Any scripts that relate to this button will subscribe to this event. However, these scripts do not break if this button is deleted, nor does the button break if the scripts are deleted. Neither party requires a reference to one another as all communication is handled by the EventManager. Any class that listens for events implements the <b>IEventManagerListener</b> interface.</p>
                <h4 class = "my-3">Factory pattern</h4>
                <p>Our application is shipped with six example glb models that can be viewed by the user. These can be selected from a dropdown menu. Each example model is represented by a corresponding class that is a subclass of the abstract Organ class. We use the <b>OrganFactory</b> class to instantiate the appropriate subclass of Organ
                based on the model chosen to view by the user at runtime. If the user chooses to load a model from local storage, the default concrete subclass of the abstract Organ class is instantiated. </p>
                <h3 class = "section-heading text-uppercase">Class Diagrams</h3>
                <h4 class = "my-3">Model Loading and Initialisation</h4>
                <img src = "assets/img/Model loading class diagram.png" style="width:100%">
                <p class ="text-muted">The ModelHandler class loads and initialises the model (using the OrganFactory), and listens for EventManager events that relate to changing the state of a particular segment of the loaded model. </p>
                <h4 class = "my-3">Annotations and storing scene state</h4>
                <img src = "assets/img/Annotations and storing scene state (1).png" style="width:100%">
                <p class ="text-muted">Annotations are used to store the current state of the scene along with text input by the user about that particular scene state.
                    Annotations are stored in the form of AnnotationData objects which can be parsed to and from JSON. The relevant data from the scene is used to initialise
                    these objects. This same data can be used to reinitialise the state of the scene when a particular annotation is selected.
                </p>
            </div>
            <div class = "text-center">
            </div>
        <div class="row text-center">
                <div class="col-md-4">
                    <h4 class="my-3">Context Diagram</h4>
                    <p class="text-muted"></p>
                    <h4 class="my-3">System architecture diagram</h4>
                    <p class="text-muted"></p>
                    <div class ="text-center"></div>
                        <h4 class="section-heading text-uppercases">Class Diagrams</h4>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Implementation -->   

    <section class="page-section" id="Implementation">
        <div class="container">
            <div class="text-center">
                <h2 class="section-heading text-uppercase">Implementation</h2>
            </div>
            <div class = "text-center">



                                     <!-- RENDERING AND INITIALISATION --> 
                <h3 class="section-heading text-uppercase">Rendering and Initialsing the Models</h3>
                <p class="text-body">Our application loads and renders GLB AND GLTF files at runtime. Unity, however, does not natively support these file types. In order to load the models into the application
                    we made use of <a href="https://github.com/Siccity/GLTFUtility">GLTFUtility</a>, an open source library that supports runtime import of GLB/GLTF files into Unity. It converts the data in the GLB/GLTF files into a number of Unity GameObjects with a MeshFilter
                    ,MeshRenderer and Material component attached. Each of these GameObjects represents a segment of the loaded model.
                    <br>
                    <ul>
                        <li>The MeshFilter and MeshRenderer components determine how the geometry/shape of the loaded model are renderered.</li>
                        <li>The Materials component determines how the surface of the model is rendered (the colour of the model, how it interacts with Unity lights and how much of the geometry
                            should be drawn to the screen). </li>
                    </ul>
                    <img src = "assets/img/Code snippets/Organ constructor.png">
                    <p class= "text-muted"><i> Organ.cs</i></p>
                    <img src = "assets/img/Code snippets/loadModelbetter.png">
                    <p class = "text-muted>"><i>ModelHandler.cs</i></p>
                <p class="text-body"> The model is loaded and initialised within a <i>coroutine</i>. The condition in the <i>yield</i> statement is evaluated each frame, and if it is false, control is passed back to the 
                    calling function so that other code can continue to execute while the model is being loaded. Once the condition is true, the remaining code executes and fully initialises the model. The line 
                    <b>MaterialAssigner.assignToAllChildren</b> is described more in later sections. Note that the ModelHandler class is a <i>singleton</i>. Although singletons are often seen as an antipattern, its
                    use here is appopriate since there is only ever one model being renderered in the scene. The size and position of the model do directly influence a number of other classes, so having ModelHandler as singleton
                    prevents them from needing to hold a reference a ModelHandler object.
                <p class="text-muted"></p>

                
        
                                    <!-- CAMERA CONTROLS --> 

                <h3 class="section-heading text-uppercase">Camera Controls</h3>
                <p class = "text-body">The user is able to rotate the camera about a pivot position, zoom in and out, and translate the camera left, right, up and down using keybinds.
                    This pivot is initialised to the centre of the model (the <i>modelCentre variable of the ModelHandler class</i>).</p>
                <img src = "assets/img/Code snippets/New snippets/camera controls updated.png">
                <p class = "text-muted">CameraController.cs</p>
                <p class = "text-body">The rotation of the camera is determined by the direction vector of the pointer. This rotation is achieved using the <b>Rotate</b> method, which
                    is a public method of the <b>Transform</b> class provided in the UnityEngine namespace. All Unity GameObjects have a Transform component attached that describes its position and orientation in the scene.
                    The displacement (in the z axis) of the camera from the pivot is determined by the movement of the Scroll wheel. 
                    Every frame, the camera's position is set equal to the position of the pivot. It is then rotated using the rotate method, and translated away from the 
                    pivot using the <b>Translate</b> method. This creates the desired effect, in that the camera is always centered on the pivot.
                </p>
                <p>The <i>displacement</i> vector is also used to store the amount displaced in the x and y axes when the keybinds are used.</p>
                <p class = "text-body"></p>
                <p class = "text-muted"></p>
                <img src = "assets/img/Code snippets/SetCameraDistance.png">
                <p class = "text-muted">CameraController.cs</p>
                <p class = "text-body">In order to allow models of different sizes to be loaded into the application and viewed in the same way, the initial displacement
                    of the camera from the pivot is determined by <i>modelRadius</i>: the radius of the model (more accurately, the radius of the sphere that bounds the renderer of the model).
                    This radius is also used to determine the <i>scrollspeed</i> attribute of the CameraController class, which means the speed at which the user can zoom in is 
                    proportional to the size of the model.  
                </p>
                <img src = "assets/img/Code snippets/resetCameralessAgain.png">
                <p class = "text-muted">CameraResetter.cs</p>
                <p class = "text-body">The position of the camera can also be reset by the user. This is carried out by means of the <b>Lerp</b> function, which performs a 
                <b>Linear Interpolation</b> between two values. For the lerp called on the camera's position, the value returned on any given frame is equivalent to 
                <b>startPos + (TargetPos - startPos) * ratio</b>, where <b>ratio</b> is the ratio of the elapsed time since the camera started resetting to the desired total reset time,
                which is set to 2 seconds in our application. When the ratio is one, the Camera's position will be equal to the target position and the lerp function will no longer be called.
                </p>
                <p class = "text-body">Finally, the user can adjust the position about which the camera is centred using the <b>pivot controller</b>. The PivotController class holds a reference to the 
                pivot itself (which is represented in the scene as a sphere), as well as a reference to three sliders. These sliders can be used to control the position of the pivot in the x,y and z axes.
                In much the same way that the <i>scrollspeed</i> and <i>cameraDistance</i> variables in the <b>CameraController</b> class are proportional to the <i>modelRadius</i>, the maximum and minimum values
                of these sliders is determined by <i>modelRadius</i>.</p>
                <img src = "assets/img/Code snippets/New snippets/initialise slider.png">
                <p class = "text-muted">PivotController.cs - function used to initialise the sliders</p>
                <img src = "assets/img/Code snippets/New snippets/changeXPos Slider.png">
                <p class = "text-muted">PivotController.cs - callback passed to the x position slider to demonstrate how the sliders work</p>
                
            
            </p>

                                <!-- ADJUST COLOUR AND OPACITY -->


                <h3 class="section-heading text-uppercase">Changing Model Colour and Opacity</h3>
                <p class="text-body"> To allow the opacity and colour of the segments of loaded models to be changed, our code directly accesses the renderers of the models.
                </p>
                <img src="assets/img/Code snippets/New snippets/AdjustANDCHANGEOPACITY updated.png" style = "width:100">
                <p class ="text-muted"> MaterialAssigner.cs </p>
                <p class = "text-body"><i>GetComponent&ltRenderer&gt()</i> returns the renderer of the GameObject/model segment passed to the functions. <i>Note:GetComponent&lt&gt</i> is a very expensive operation, which is why we obtain a reference to the renderer once
                at the start of the function to prevent the need to call it again.</i> By changing the values
                    of its material, we change how the Unity renderer displays the GameObjects on screen. MaterialAssigner is a static class and houses all methods related to the assignment and manipulation of the materials of loaded models. The functions above in particular
                are called as part of callback actions to different events triggered by the user (see below).</p>
                <img src="assets/img/Code snippets/col and opacity 2.png" style = "width:100">
                <p class = "text-muted">ModelHandler.cs</p>
                <p class = "text-body"> We initially encountered some draw ordering issues when attempting to adjust the opacity of the different segments of the model. We resolved these issues by
                    making changes to the shaders our models were using (<i>see Cross Sectional Viewer</i>) and by adjusting the RenderQueue attribute of the material applied to each of the segments of the model. The higher the RenderQueue value, 
                    the later an object is drawn to the screen. By making it so that segments that are hidden by other segments are drawn to the screen later, it is possible to see them beneath the outer segments when the opacity of the outer 
                    segments are reduced. This is the purpose of the <b>MaterialAssigner.assignToAllChildren</b> function called in the <i>loadModel</i> coroutine above.</p>
                <img src = "assets/img/Code snippets/assignToAllChildren.png">
                <p class = "text-muted">MaterialAssigner.cs</p>
                <img src = "assets/img/Code snippets/assignNewMaterial.png">
                <p class = "text-muted">MaterialAssigner.cs</p>




                <!-- CREATING, STORING AND VIEWING ANNOTATIONS -->
                <h3 class="section-heading text-uppercase">Creating, Storing and Viewing Annotations</h3>
                <p class = "text-body">Annotations are used for storing text about a particular model in a particular view of that model. To clarify, if the user creates an annotation, the current state of the scene,
                    along with the text they entered, is saved. Selecting this annotation will return the user to that exact view of the model, and display the text in a textbox. 
                    This data is stored in the form of an AnnotationData object.
                </p>
                <img src = "assets/img/Code snippets/AnnotationData.PNG" style="size:50px">
                <p class="text-muted">AnnotationData.cs</p>
                <p class ="text-body">When a user confirms they want to create an annotation, a new AnnotationData object is instantiated and its fields populated with the relevant data.
                     It is then converted into a JSON string and written to a new file whose name is the same as the title entered by the user. This file is stored in a directory whose name is the same as the model currently being viewed.
                     This directory is initialised as soon as the model is loaded into the program for the first time, in the same directory that the application runs in.
                </p>
                <img src = "assets/img/Code snippets/Annotation.png">
                <p class="text-muted">Annotation.cs</p>
                <p class ="text-body">The user can select an annotation to view from a dropdown menu. When the user clicks the button to view the dropdown menu, the relevant folder is searched for JSON files. All these files are parsed from JSON back into AnnotationData objects,
                    which are stored in a list. 
                <img src = "assets/img/Code snippets/JsonToAnnotationNoComment.png">
                <p class="text-muted">AnnotationSelector.cs</p>
                When an annotation from the dropdown list is selected, an <i>OnSelectAnnotation</i> event is fired which holds the relevant AnnotationData object. All subscribers of this event will restore the part of the scene that they are responsible for back to the state
                encapsulated by the AnnotationData object received (for instance, CameraController restores camera position,rotation and displacement, ModelHandler restores the colours of the model segments, etc).
                <img src = "assets/img/Code snippets/onIndexChanged.PNG">
                <p class = "text-muted">AnnotationSelector.cs</p>

                <!-- CROSS SECTIONAL VIEWER -->


                <h3 class="section-heading text-uppercase">Cross Sectional Viewer</h3>
                <p class="text-body">To implement this feature we made use of <i>surface shaders</i> written in High Level Shader Language.
                    Surface shaders provide a code generation approach to writing shaders that interact with light in Unity. 
                    The concept that our cross-sectional viewer shader employs is similar to the idea of  <i>occlusion culling</i>, in which an object will only be rendered by a camera if it is between the near and far clipping planes of the camera. 
                    If an object is partially between these two planes, only its polygons between the two planes will be drawn to the screen.
                    Our shader (which we based heavily on <a href="url">this open-source shader</a>, as well as the shaders included in the GLTFUtility library that were already being used) determines which pixels of the model should not be drawn to the screen,
                    based on the position and orientation of a plane that can be controlled by the user using sliders.<br> If the <b>dot product</b> of:
                    <ui>
                        <li>The distance between the <i>world space</i> position of the pixel on the model currently being evaluated by the shader and the centre of the plane <b>AND</b></li>
                        <li>The plane's normal</li>
                    is positive, then the current pixel is <b>above</b> the plane, so is discarded.
                </p>
                <p>Below I've included the shader itself</p><br>
                <img src = "assets/img/Code snippets/Shader properties.PNG">
                <p class = "text-muted">The list of <b>properties</b> which can be accessed externally (in the Unity inspector, in c# scripts, etc).</p>
                <img src = "assets/img/Code snippets/New snippets/subshader again.png">
                <p class = "text-muted">The <b>subshader</b> block, where we define the RenderingMode as transparent and perform an initial <b>pass</b>, meaning a first render of the object.
                <img src = "assets/img/Code snippets/shader input.PNG">
                <p class = "text-muted">The <b>input</b> struct, that holds the relevant data from the model's mesh,
                <img src = "assets/img/Code snippets/New snippets/surf again.png"> 
                <p class="text-muted">The <b>surface function</b>, which fills in the <b>SurfaceOutputStandard</b> struct based on the values of the Input struct. This ultimately defines how the model is rendered.</p>
                <p class="text-body">The above shader is used to create the material that is applied to the model after it has first loaded in <i>(see the assignNewMaterial function in the MaterialAssigner class above)</i>. However, initially, all of the model's geometry is visible due to the plane being initialised with a y position of <i>modelCentre +modelRadius</i>, which will always be greater than the height of
                    the model itself as this radius represents the bounding sphere of the renderer of the model.
                    When the user first presses the cross-sectional view icon, the plane controller is enabled and a different shader is applied to the model. This shader turns the pixels above the plane black, but is otherwise
                    very similar to the shader above.
                </p>
                <img src = "assets/img/Code snippets/enable plane controller.png">
                <p class = "text-muted">PlaneController.cs</p>
                <p class= "text-body">The user then controls the plane by means of sliders. One slider controls the y position of the plane, while the other three control the orientation of the plane about the x,y and z
                    axes. This is an example of the type of callback action that is passed to a slider.
                </p>
                <img src = "assets/img/Code snippets/changeXRot.png">
                <p class = "text-muted">PlaneController.cs</p>
                <p class = "text-body"> Finally, it's important to note that, although the <b>properties</b> of the shader can be accessed, the shader itself cannot hold a reference
                to any other object in the scene. The <b>_PlanePosition</b> and <b>_PlaneNormal</b> are arbitrary Vector3 values. Every frame, these values must be updated with the position
                and normal of the plane being controlled by the user.</p>
                <img src = "assets/img/Code snippets/Update planeos.png" style = "width:50">
                <p class = "text-muted">PlaneController.cs</p>
                <img src = "assets/img/Code snippets/material assigner update plane pos.png" style = "width:50">
                <p class = "text-muted">MaterialAssigner.cs</p>       
                <p class = "text-body">Once the user confirms the cross section, the original shader is reapplied, and so the pixels of the model that were coloured black while the user was controlling
                    the plane are discarded. To save computation, the _PlanePosition and _PlaneNormal properties are no longer updated as both the plane and model are stationary.
                </p>

                 <!-- DICOM VIEWER -->
                <h3 class="section-heading text-uppercase">DICOM Viewer</h3>
                <p class="text-body">Due to the complexities underpinning the structure of DICOM files, we made use of an open source library for image viewing and manipulation called the <a href  = https://simpleitk.org>Simple Image ToolKit</a>. Using this library, reading a .dcm file from a chosen
                filepath converts that .dcm into an object of type SITKImage. To display the image in our GUI, we had to temporarily write this image to a PNG and then load the PNG as a Texture2D object. This was necessary as Texture2D objects can be
                displayed on Unity UI images, but SITKImage objects cannot.</p>
                <img src = "assets/img/Code snippets/SIMPLEIMAGETOOLKIT.png">
                <p class="text-muted">DicomToPNG.cs - This code for reading in a DICOM image and converting it is based on <a href = "https://simpleitk.readthedocs.io/en/master/link_DicomConvert_docs.html">this example code.</a></p>
                <p class="text-body">The user is able to select multiple .dcms to view in a draggable panel. The functionality of this draggable panel is provided by the DicomController class. The paths the user selects are stored in an array. This array is then iterated through and, using the method above,
                    each path in the array is converted into a Texture2D object and stored in a list. </p>
                <img src = "assets/img/Code snippets/Update images.png">
            </div>
    </section>



    <!-- Testing -->   

    <section class="page-section" id="Testing">
        <div class="container">
            <div class="text-center">
                <h3 class="section-heading text-uppercase">Testing</h3>
                <h3 class= "section-heading text-uppercase"></h3>

                <h3 class = "section-heading text-uppercase">Unit/Integration testing</h4>
                <p class = "my-3">The nature of our application made it fundamentally difficult to Unit Test. As our application is built in Unity, the majority of our classes inherit from the MonoBehaviour class.
                    Unlike other classes in C#, MonoBehaviours cannot be instantiated directly, but must be instead attached to an existing Unity GameObject using the <i>AddComponent&lt&gt</i> function. Furthermore, due to a number of classes being
                    dependent on the loaded model, testing individual modules of code proved difficult. <br>
                    However, using the Unity Testing FrameWork, we were able to create tests to verify a few of the core functionalities of our system. Namely, we wrote tests to verify that the Events of our EventManager class could be invoked and received
                    by the relevant listener classes, whether the models were being loaded with the expected number of segments and that our AnnotationData objects could be parsed to and from JSON. </p>
                <img src = "assets/img/ModelLoadingTests.PNG">
                <p class = "text-muted">ModelLoadingTests.cs - Involves setting up a small test scene using dummy GameObjects before functionality can be tested.</p>
                <img src = "assets/img/TestRunner.PNG">
                <p class = "text-muted">Running the playmode tests using the Test Runner.</p>
            </div>
            <div class = "text-centre">Compatibility and Performance Testing</div>
            <p class = "my-3">To ensure that our application ran and ran well on devices beyond those being used to develop it, throughout development we tested our application on a number of devices. Namely those of our clients</p>

        <div class="row text-center">
            <div class = "text-center">
                <h4 class="my-3">Testing Strategy</h4>
            </div>
            </div>
        </div>
    </section>

    <!-- Testing -->   

   
        <!-- Footer-->
        <footer class="footer py-4">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-4 text-lg-left">Copyright © Your Website 2020</div>
                    <div class="col-lg-4 my-3 my-lg-0">
                        <a class="btn btn-dark btn-social mx-2" href="#!"><i class="fab fa-twitter"></i></a>
                        <a class="btn btn-dark btn-social mx-2" href="#!"><i class="fab fa-facebook-f"></i></a>
                        <a class="btn btn-dark btn-social mx-2" href="#!"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                    <div class="col-lg-4 text-lg-right">
                        <a class="mr-3" href="#!">Privacy Policy</a>
                        <a href="#!">Terms of Use</a>
                    </div>
                </div>
            </div>
        </footer>
        <!-- Portfolio Modals-->
        <!-- Modal 1-->
        <div class="portfolio-modal modal fade" id="portfolioModal1" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="close-modal" data-dismiss="modal"><img src="assets/img/close-icon.svg" alt="Close modal" /></div>
                    <div class="container">
                        <div class="row justify-content-center">
                            <div class="col-lg-8">
                                <div class="modal-body">
                                    <!-- Project Details Go Here-->
                                    <h2 class="text-uppercase">Project Name</h2>
                                    <p class="item-intro text-muted">Lorem ipsum dolor sit amet consectetur.</p>
                                    <img class="img-fluid d-block mx-auto" src="assets/img/portfolio/01-full.jpg" alt="" />
                                    <p>Use this area to describe your project. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Est blanditiis dolorem culpa incidunt minus dignissimos deserunt repellat aperiam quasi sunt officia expedita beatae cupiditate, maiores repudiandae, nostrum, reiciendis facere nemo!</p>
                                    <ul class="list-inline">
                                        <li>Date: January 2020</li>
                                        <li>Client: Threads</li>
                                        <li>Category: Illustration</li>
                                    </ul>
                                    <button class="btn btn-primary" data-dismiss="modal" type="button">
                                        <i class="fas fa-times mr-1"></i>
                                        Close Project
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Modal 2-->
        <div class="portfolio-modal modal fade" id="portfolioModal2" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="close-modal" data-dismiss="modal"><img src="assets/img/close-icon.svg" alt="Close modal" /></div>
                    <div class="container">
                        <div class="row justify-content-center">
                            <div class="col-lg-8">
                                <div class="modal-body">
                                    <!-- Project Details Go Here-->
                                    <h2 class="text-uppercase">Project Name</h2>
                                    <p class="item-intro text-muted">Lorem ipsum dolor sit amet consectetur.</p>
                                    <img class="img-fluid d-block mx-auto" src="assets/img/portfolio/02-full.jpg" alt="" />
                                    <p>Use this area to describe your project. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Est blanditiis dolorem culpa incidunt minus dignissimos deserunt repellat aperiam quasi sunt officia expedita beatae cupiditate, maiores repudiandae, nostrum, reiciendis facere nemo!</p>
                                    <ul class="list-inline">
                                        <li>Date: January 2020</li>
                                        <li>Client: Explore</li>
                                        <li>Category: Graphic Design</li>
                                    </ul>
                                    <button class="btn btn-primary" data-dismiss="modal" type="button">
                                        <i class="fas fa-times mr-1"></i>
                                        Close Project
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Modal 3-->
        <div class="portfolio-modal modal fade" id="portfolioModal3" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="close-modal" data-dismiss="modal"><img src="assets/img/close-icon.svg" alt="Close modal" /></div>
                    <div class="container">
                        <div class="row justify-content-center">
                            <div class="col-lg-8">
                                <div class="modal-body">
                                    <!-- Project Details Go Here-->
                                    <h2 class="text-uppercase">Project Name</h2>
                                    <p class="item-intro text-muted">Lorem ipsum dolor sit amet consectetur.</p>
                                    <img class="img-fluid d-block mx-auto" src="assets/img/portfolio/03-full.jpg" alt="" />
                                    <p>Use this area to describe your project. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Est blanditiis dolorem culpa incidunt minus dignissimos deserunt repellat aperiam quasi sunt officia expedita beatae cupiditate, maiores repudiandae, nostrum, reiciendis facere nemo!</p>
                                    <ul class="list-inline">
                                        <li>Date: January 2020</li>
                                        <li>Client: Finish</li>
                                        <li>Category: Identity</li>
                                    </ul>
                                    <button class="btn btn-primary" data-dismiss="modal" type="button">
                                        <i class="fas fa-times mr-1"></i>
                                        Close Project
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Modal 4-->
        <div class="portfolio-modal modal fade" id="portfolioModal4" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="close-modal" data-dismiss="modal"><img src="assets/img/close-icon.svg" alt="Close modal" /></div>
                    <div class="container">
                        <div class="row justify-content-center">
                            <div class="col-lg-8">
                                <div class="modal-body">
                                    <!-- Project Details Go Here-->
                                    <h2 class="text-uppercase">Project Name</h2>
                                    <p class="item-intro text-muted">Lorem ipsum dolor sit amet consectetur.</p>
                                    <img class="img-fluid d-block mx-auto" src="assets/img/portfolio/04-full.jpg" alt="" />
                                    <p>Use this area to describe your project. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Est blanditiis dolorem culpa incidunt minus dignissimos deserunt repellat aperiam quasi sunt officia expedita beatae cupiditate, maiores repudiandae, nostrum, reiciendis facere nemo!</p>
                                    <ul class="list-inline">
                                        <li>Date: January 2020</li>
                                        <li>Client: Lines</li>
                                        <li>Category: Branding</li>
                                    </ul>
                                    <button class="btn btn-primary" data-dismiss="modal" type="button">
                                        <i class="fas fa-times mr-1"></i>
                                        Close Project
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Modal 5-->
        <div class="portfolio-modal modal fade" id="portfolioModal5" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="close-modal" data-dismiss="modal"><img src="assets/img/close-icon.svg" alt="Close modal" /></div>
                    <div class="container">
                        <div class="row justify-content-center">
                            <div class="col-lg-8">
                                <div class="modal-body">
                                    <!-- Project Details Go Here-->
                                    <h2 class="text-uppercase">Project Name</h2>
                                    <p class="item-intro text-muted">Lorem ipsum dolor sit amet consectetur.</p>
                                    <img class="img-fluid d-block mx-auto" src="assets/img/portfolio/05-full.jpg" alt="" />
                                    <p>Use this area to describe your project. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Est blanditiis dolorem culpa incidunt minus dignissimos deserunt repellat aperiam quasi sunt officia expedita beatae cupiditate, maiores repudiandae, nostrum, reiciendis facere nemo!</p>
                                    <ul class="list-inline">
                                        <li>Date: January 2020</li>
                                        <li>Client: Southwest</li>
                                        <li>Category: Website Design</li>
                                    </ul>
                                    <button class="btn btn-primary" data-dismiss="modal" type="button">
                                        <i class="fas fa-times mr-1"></i>
                                        Close Project
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Modal 6-->
        <div class="portfolio-modal modal fade" id="portfolioModal6" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="close-modal" data-dismiss="modal"><img src="assets/img/close-icon.svg" alt="Close modal" /></div>
                    <div class="container">
                        <div class="row justify-content-center">
                            <div class="col-lg-8">
                                <div class="modal-body">
                                    <!-- Project Details Go Here-->
                                    <h2 class="text-uppercase">Project Name</h2>
                                    <p class="item-intro text-muted">Lorem ipsum dolor sit amet consectetur.</p>
                                    <img class="img-fluid d-block mx-auto" src="assets/img/portfolio/06-full.jpg" alt="" />
                                    <p>Use this area to describe your project. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Est blanditiis dolorem culpa incidunt minus dignissimos deserunt repellat aperiam quasi sunt officia expedita beatae cupiditate, maiores repudiandae, nostrum, reiciendis facere nemo!</p>
                                    <ul class="list-inline">
                                        <li>Date: January 2020</li>
                                        <li>Client: Window</li>
                                        <li>Category: Photography</li>
                                    </ul>
                                    <button class="btn btn-primary" data-dismiss="modal" type="button">
                                        <i class="fas fa-times mr-1"></i>
                                        Close Project
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Bootstrap core JS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Third party plugin JS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
        <!-- Contact form JS-->
        <script src="assets/mail/jqBootstrapValidation.js"></script>
        <script src="assets/mail/contact_me.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
    </body>
</html>
